"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}var chordictionary=function(a){'use strict';var t=Math.max,u=Math.min;function b(c,a){var b=w.indexOf(a)-w.indexOf(c);return 0>b&&(b=w.length+b),b}function c(a){return a.map(function(a){return isNaN(a)||null===a?null:y[a]})}function d(a,b,c){for(var d,e,f={},g=0;g<a.length;g++)if(!isNaN(a[g])){e=a[g]+w.indexOf(c[g]),e>w.length-1&&(e-=w.length);for(var h=0;h<b.length;h++)f[w[e]]?w[e]===w[h]&&f[w[e]]++:f[w[e]]=1}for(var k=0;k<b.length;k++)if(b[k]in f)d=!0;else{d=!1;break}return d}function e(a){var b,c;try{if("string"!=typeof a)throw v.invalidChordName;else{var d=a.search("#");return-1===d?(b=a.charAt(0),c=a.slice(1)):(b=a.slice(0,2).toUpperCase(),c=a.slice(2)),[b,c]}}catch(a){return!1}}function f(a){for(var b,c,d=a.join("-"),e=0;e<z.length;e++)if(b=z[e].integer,c=new RegExp("^"+d+"$","g"),b.match(c))return z[e];return!1}function g(a){for(var b,c=_toConsumableArray(a),d=[],e=[],f=0;f<c.length;f++)b=c[f].semitones.filter(function(a){return null!=a}).join(""),d.includes(b)?e.push(f):d.push(b);return e}function h(a){var b=/^[#a-g]+$/i;return!!b.test(a)}function i(a){var b=[],c=/^[a-g]+$/i,d=/^[#a-g]+$/i;if(c.test(a))return a.toUpperCase().split("");if(d.test(a)){a=a.toUpperCase();for(var e=0;e<a.length;e++)"#"!==a.charAt(e)&&("#"===a.charAt(e+1)?(b.push(a.slice(e,e+2)),e++):b.push(a.slice(e,e+1)));return b}return!1}function j(a){if(!Array.isArray(a))throw a+" is not an array.";else return a.filter(function(a,b,c){return b===c.indexOf(a)})}function k(a,b){if("object"===_typeof(a)){"string"==typeof b&&(b=b.toLowerCase());for(var c=0;c<a.length;c++)for(var d in a[c]){if(a[c][d]===b)return a[c];if("string"==typeof a[c][d]&&a[c][d].toLowerCase()===b)return a[c]}throw"Couldn't find "+b+" in "+a}else throw a+" is not an object."}function l(a,b){var c=!1;if(!Array.isArray(a))throw a+" is not an array.";if("undefined"==typeof b)throw"Missing parameter.";switch(b){case"min":if(c=u.apply(Math,a),!isNaN(c))return c;for(var d=0;d<a.length;d++)if(isNaN(a[d]))continue;else if(isNaN(c)){c=a[d];continue}else if(a[d]<c)c=a[d];else continue;break;case"max":if(c=t.apply(Math,a),!isNaN(c))return c;for(var e=0;e<a.length;e++)if(isNaN(a[e]))continue;else if(isNaN(c)){c=a[e];continue}else if(a[e]>c)c=a[e];else continue;break;default:c=m(a.join(""),b);}return c}function m(a,b,c){if(a+="",b+="",0>=b.length)return a.length+1;for(var d=0,e=0,f=c?1:b.length;e=a.indexOf(b,e),0<=e;)++d,e+=f;return d}function n(a){var b=/^[x0-9]*$/i;return!!b.test(a)}function o(a,b){a=a.toLowerCase(),b=b||"EADGBE";var c=[];if(a.length<=b.length)return a.split("");if(a.length===2*b.length){for(var d=0;d<a.length;d++)d%2||c.push(a.slice(d,d+2));return c}if(a.length>b.length){if(1<l(a.split(""),"max")){for(var e=0;e<a.length;e++)-1!==a.charAt(e).search(/[x02-9]/i)||1===a.charAt(e)&&-1!==a.charAt(e+1).search(/x/i)?c.push(a.slice(e,e+1)):-1===a.charAt(e+1).search(/x/i)&&(c.push(a.slice(e,e+2)),e++);return c}throw v.invalidTab}else return!1}function p(a,b){for(var c,d,e=[],f=0;f<a.length;f++)isNaN(a[f])?e.push("x"):(d=b[f],c=parseInt(a[f])+w.indexOf(d),c>w.length-1&&(c-=w.length),e.push(w[c]));return e}function q(a){for(var c,d=[],e=0;e<a.length;e++)if(c=[],a[e]&&"x"!==a[e].toLowerCase()){for(var f=0;f<a.length;f++){if(!a[f]||"x"===a[f].toLowerCase()){c.push(null);continue}var g=b(a[e],a[f]);c.push(g)}c.includes(0)&&d.push(c)}return d}function s(a){var b=_toConsumableArray(a);return b=b.filter(function(a){return!isNaN(a)&&null!=a}),j(b.sort(function(c,a){return c-a}))}/**Chordictionary v0.1.0-beta.3, @license MIT, (c) 2019 Hubert Fauconnier + contributors*/var v={croppedChordLayout:"Number of frets does not allow full display of the chord.",failedToConvertTabIntoNotes:"Could not convert the tab into notes.",failedToCalculateFormula:"Could not calculate the formulas.",invalidTab:"The tab should only be composed of \"x\" and numbers from 1 to 9.",invalidTuning:"The tuning doesn't seem right. It should only be composed of 1 or more letters from A to G.",invalidChordName:"The chord name doesn't seem right. A valid chord name could be Amin, C, Gsus4...",noMatch:"The tab didn't match any known chord."},w=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],y=["P1","m2","M2","m3","M3","P4","A4/d5","P5","m6","M6","m7","M7","P8/d9","m9/A8","M9/d10","m10/A9","M10/d11","P11/A10","d12/A11","P12/d13","m13/A12","M13/d14","m14/A13","M14/d15","P15/A14","A15"],z=[{formula:"1-3-5",integer:"0-4-7",name:"Major",suffix:""},{formula:"1-3-5#",integer:"0-4-8",name:"Augmented",suffix:"aug"},{formula:"1-b3-b5",integer:"0-3-6",name:"Diminished",suffix:"dim"},{formula:"1-b3-5",integer:"0-3-7",name:"Minor",suffix:"min"},{formula:"1-b3-5-9",integer:"0-2-3-7",name:"Minor, added ninth",suffix:"m(add9)"},{formula:"1-4-5",integer:"0-5-7",name:"Suspended fourth",suffix:"sus4"},{formula:"1-2-5",integer:"0-2-7",name:"Suspended second",suffix:"sus2"},{formula:"1-3-5-9",integer:"0-2-4-7",name:"Added ninth",suffix:"add9"},{formula:"1-3-b7",integer:"0-4-10",name:"Seventh",suffix:"7"},{formula:"1-3-5-b7",integer:"0-4-7-10",name:"Dominant seventh",suffix:"7"},{formula:"1-3-5-7",integer:"0-4-7-11",name:"Major seventh",suffix:"Maj7"},{formula:"1-b3-5-7",integer:"0-3-7-11",name:"Minor, major seventh",suffix:"m(Maj7)"},{formula:"1-b3-5-b7",integer:"0-3-7-10",name:"Minor seventh",suffix:"m7"},{formula:"1-b3-b5-b7",integer:"0-3-6-10",name:"Minor seventh, flat fifth",suffix:"m7b5"},{formula:"1-3-6",integer:"0-4-9",name:"Sixth",suffix:"6"},{formula:"1-b3-5-6",integer:"0-3-7-9",name:"Minor sixth",suffix:"m6"},{formula:"1-b3-5-b6",integer:"0-3-7-8",name:"Minor, flat sixth",suffix:"mb6"},{formula:"1-b3-5-6-9",integer:"0-2-3-7-9",name:"Minor sixth, added ninth",suffix:"m6/9"},{formula:"1-3-5-6",integer:"0-4-7-9",name:"Major Sixth",suffix:"Maj6"},{formula:"1-3-5-6-9",integer:"0-2-4-7-9",name:"Sixth, added ninth",suffix:"6/9"},{formula:"1-3-5-7-9",integer:"0-2-4-7-11",name:"Major ninth",suffix:"Maj9"},{formula:"1-b3-5-b7-9",integer:"0-2-3-7-10",name:"Minor ninth",suffix:"m9"},{formula:"1-b3-5-7-9",integer:"0-2-3-7-11",name:"Minor ninth, major seventh",suffix:"m9(Maj7)"},{formula:"1-b3-b5-b7-9",integer:"0-2-3-6-10",name:"Minor eleventh",suffix:"m9b5"},{formula:"1-b3-5-b7-9-11-13",integer:"0-2-3-4-6-7-10",name:"Minor thirteen",suffix:"m13"},{formula:"1-3-5-b7-#11",integer:"0-4-6-7-10",name:"Seventh, sharp eleventh",suffix:"7#11"},{formula:"1-3-5-7-#11",integer:"0-4-6-7-11",name:"Major seventh, sharp eleventh",suffix:"Maj7#11"},{formula:"1-3-5-7-9-13",integer:"0-2-4-7-9-11",name:"Major thirteen",suffix:"Maj13"},{formula:"1",integer:"0",name:"Single note",suffix:""},{formula:"1-5",integer:"0-7",name:"Power chord",suffix:"5"}],A=function(){function a(b,c,d,e){_classCallCheck(this,a);try{if(h(b))this.tuning=i(b);else throw v.invalidTuning;this.fretNumber=c,this.fretsToDisplay=isNaN(d)?0:d+1,this.maxSpan=isNaN(e)?4:e}catch(a){return console.error(a),!1}return this}return _createClass(a,[{key:"getChordInfo",value:function(a){var b=[],d=[],e="",h=[],j={error:"",tab:[],notes:"",tuning:this.tuning,chords:[]};try{if(n(a))a=o(a),j.tab=a;else throw v.invalidTab}catch(a){return j.error=a,j}try{b=p(a,this.tuning),j.notes=_toConsumableArray(b)}catch(a){return j.error=v.failedToConvertTabIntoNotes,j}try{d=q(b)}catch(a){return j.error=v.failedToCalculateFormula,j}e=d.map(s);try{for(var k,l=0;l<e.length;l++)k=f(e[l]),k&&h.push({formula:k.formula,integer:k.integer,semitones:_toConsumableArray(d)[l],name:k.name,suffix:k.suffix});if(0<h.length){var m=g(h);h=h.filter(function(a,b){return!m.includes(b)})}else throw v.noMatch}catch(a){return j.error=a,j}var t=!0,u=!1,w=void 0;try{for(var x,y=h[Symbol.iterator]();!(t=(x=y.next()).done);t=!0){var z=x.value,r=b[z.semitones.indexOf(0)];j.chords.push({name:r+z.suffix,pitch:r,formula:z.formula,intervals:c(z.semitones),semitones:z.semitones,notes:_toConsumableArray(b),quality:z.name,suffix:z.suffix})}}catch(a){u=!0,w=a}finally{try{t||null==y["return"]||y["return"]()}finally{if(u)throw w}}return j}},{key:"getChordsList",value:function(a,b,c){var f=this;c=c||0;var g,h,j,m,n=[],o=[],p={error:"",chordList:[],offset:0},q={basic:{rootBelow4thFret:!0,noMuteAfterFirstNote:!0,rootIsLowestNote:!0,splittedChord:!1,openString:!0},powerchord:{frettedNotes:[2,3],rootIsLowestNote:!0,rootOnLowestFret:!0,splittedChord:!1,openString:!1},bar:{rootIsLowestNote:!0,rootOnLowestFret:!0,barredString:[3,6],noMuteAfterFirstNote:!0,splittedChord:!1,openString:!1}};try{if("string"==typeof a)a=e(a),j=a[0],g=a[1],n.push(j),m=w.indexOf(j);else throw v.invalidChordName;h=k(z,g),o=h.integer.split("-")}catch(a){return p.error=v.invalidChordName,p}for(var r,s=1;s<o.length;s++)r=parseInt(o[s])+parseInt(m),r>w.length-1&&(r-=w.length),n.push(w[r]);var t,u=[],x=0;for(x=0;x<this.tuning.length;x++){u[x]=[],u[x].push("x");for(var y=0;y<n.length;y++)t=w.indexOf(n[y])-w.indexOf(this.tuning[x]),0>t&&(t=w.length+t),u[x].push(t),t+12<this.fretNumber&&u[x].push(t+12)}var A=[];for(x=0;x<this.tuning.length;x++)for(var B=A.length,C=0;C<u[x].length;C++)if(A[C]){for(var D=0;D<B;D++)if(0==C)A[D].push(u[x][C]);else{var E=A[D].slice(0);E.pop(),E.push(u[x][C]),A.push(E)}}else A[C]=[u[x][C]];var F=[],G=function(a,b){for(var c in a){if(!Object.prototype.hasOwnProperty.call(b,c))return!1;if("object"===_typeof(a[c])){var d=a[c][0],e=a[c][1];if(b[c]<d||b[c]>e)return!1}else if(b[c]!==a[c])return!1}return!0};try{for(var H=c;H<A.length;H++)if(d(A[H],n,this.tuning)&&l(A[H],"max")-l(A[H],"min")<this.maxSpan&&function(){var a={openString:!1,frettedNotes:0},b=A[H].join(""),c=/[0-9]+[x]+[0-9]+/gi,d=/[0-9]+[x]+/gi;a.splittedChord=!!c.test(b),a.noMuteAfterFirstNote=!d.test(b);for(var e,g=0;g<A[H].length;g++)if(e=A[H][g],!isNaN(e)){var h=e+w.indexOf(f.tuning[g]);0===e&&(a.openString=!0),m===h&&(0===a.frettedNotes&&(a.rootIsLowestNote=!0),a.rootBelow4thFret=!!(4>=e),a.rootOnLowestFret=!!(l(A[H],"min")>=e)),(0<e&&g<A[H].length-1&&e===A[H][g-1]||3<=l(A[H],e))&&(a.barredString=isNaN(a.barredString)?1:a.barredString+1),a.frettedNotes++}var i={tab:A[H],tag:[]};Object.getOwnPropertyNames(q).forEach(function(b){G(q[b],a)&&i.tag.indexOf(b)&&i.tag.push(b)}),F.push(i)}(),0<b&&b<A[H].length&&F.length===b){c=H+1;break}}catch(a){console.error(a)}return p.chordList=F,p.offset=c,p}},{key:"getChordLayout",value:function(a,b){var d,e,c=Math.abs,f=this.fretsToDisplay;b="object"===_typeof(b)?b:{};try{d=n(a)?o(a):[0,0,0,0,0,0]}catch(a){return!1}for(var g=b.notes?b.notes:d,h=b.name?b.name:d.join(" "),j=[],k=0;k<d.length;k++)!1===isNaN(d[k])&&j.push(d[k]);var l=c(t.apply(Math,j)),m=c(u.apply(Math,j)),p=1;l>=f&&(p=0<m?m:1),1===p&&5<l&&(p=l-f+2);try{if(0===f)f=l-p+2;else if(l-p+1>f-1)throw f=l-p+2,v.croppedChordLayout}catch(a){console.error(a)}e="<table class=\"chord\">";for(var q,r=0;r<f;r++){q=r+p-1,1===p&&0==r&&(e+="<thead>"),e+=q%2&&0<q?"<tr><th class=\"fret-number\">"+q+"</th>":"<tr><th></th>";for(var s,w=0;w<this.tuning.length;w++)s=parseInt(d[w]),e+=0==r?0===s?"<th><div class=\"dot open\"></div></th>":"<th></th>":s===p+r-1?"<td><div class=\"dot plain\">"+g[w]+"</div></td>":"<td></td>";e+=1===p&&0==r?"<tr></thead>":"</tr>"}return e+="<caption align=\"bottom\">"+h+"</caption>",e+="</table>",e}}]),a}();return a.Instrument=A,a.isValidTab=n,a.isValidTuning=h,a.parseTuning=i,a.parseTab=o,a.parseChord=e,a.tuning={guitar:{standard:["E","A","D","G","B","E"],halfstepdown:["D#","G#","C#","F#","A#","D#"],drop_d:["D","A","D","G","B","E"],d_modal:["D","A","D","G","A","D"],open_g:["G","G","D","G","B","D"]},bass:{standard:["E","A","D","G"],drop_d:["C","A","D","G"]},ukulele:{standard:["G","C","E","A"]},violin:{standard:["G","D","A","E"]}},a.notes=w,a}({});