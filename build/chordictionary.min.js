"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};/**Chordictionary v0.1.0-alpha.2, @license MIT, (c) 2016 Hubert Fauconnier + contributors*/
!function(t){function e(){function t(t,e,r){for(var n=void 0,o=void 0,i=void 0,a={},f=0;f<t.length;f++)if(!isNaN(t[f]))for(o=t[f]+h.indexOf(r[f]),o>h.length-1&&(o-=h.length),i=0;i<e.length;i++)a[h[o]]?h[o]===h[i]&&a[h[o]]++:a[h[o]]=1;for(i=0;i<e.length;i++){if(!(e[i]in a)){n=!1;break}n=!0}return n}function e(t,e){t=t.toLowerCase(),e=e||"EADGBE";var r=[];if(t.length<=e.length)return t.split("");if(t.length===2*e.length){for(var n=0;n<t.length;n++)n%2||r.push(t.slice(n,n+2));return r}if(t.length>e.length){if(a(t.split(""),"max")>1){for(var o=0;o<t.length;o++)-1!==t.charAt(o).search(/[x02-9]/i)||1===t.charAt(o)&&-1!==t.charAt(o+1).search(/x/i)?r.push(t.slice(o,o+1)):-1===t.charAt(o+1).search(/x/i)&&(r.push(t.slice(o,o+2)),o++);return r}throw s.invalidTab}return!1}function r(t){var e=[],r=new RegExp("^[a-g]+$","i"),n=new RegExp("^[#a-g]+$","i");if(r.test(t))return t.toUpperCase().split("");if(n.test(t)){t=t.toUpperCase();for(var o=0;o<t.length;o++)"#"!==t.charAt(o)&&("#"!==t.charAt(o+1)?e.push(t.slice(o,o+1)):(e.push(t.slice(o,o+2)),o++));return e}throw s.invalidTuning}function n(t){var e=void 0,r=void 0;try{if("string"!=typeof t)throw s.invalidChordName;var n=t.search("#");return-1===n?(e=t.charAt(0),r=t.slice(1)):(e=t.slice(0,2).toUpperCase(),r=t.slice(2)),[e,r]}catch(o){return!1}}function o(t){if(Array.isArray(t))return t.filter(function(t,e,r){return e===r.indexOf(t)});throw t+" is not an array."}function i(t,e){if("object"===("undefined"==typeof t?"undefined":_typeof(t))){"string"==typeof e&&(e=e.toLowerCase());for(var r=0;r<t.length;r++)for(var n in t[r]){if(t[r][n]===e)return t[r];if("string"==typeof t[r][n]&&t[r][n].toLowerCase()===e)return t[r]}throw"Couldn't find "+e+" in "+t}throw t+" is not an object."}function a(t,e){var r=!1;if(!Array.isArray(t))throw t+" is not an array.";if("undefined"==typeof e)throw"Missing parameter.";switch(e){case"min":if(r=Math.min.apply(Math,t),!isNaN(r))return r;for(var n=0;n<t.length;n++)isNaN(t[n])||(isNaN(r)?r=t[n]:t[n]<r&&(r=t[n]));break;case"max":if(r=Math.max.apply(Math,t),!isNaN(r))return r;for(var o=0;o<t.length;o++)isNaN(t[o])||(isNaN(r)?r=t[o]:t[o]>r&&(r=t[o]));break;default:r=f(t.join(""),e)}return r}function f(t,e,r){if(t+="",e+="",e.length<=0)return t.length+1;for(var n=0,o=0,i=r?1:e.length;;){if(o=t.indexOf(e,o),!(o>=0))break;++n,o+=i}return n}var s={croppedChordLayout:"Number of frets does not allow full display of the chord.",failedToConvertTabIntoNotes:"Could not convert the tab into notes.",failedToCalculateFormula:"Could not calculate the formulas.",invalidTab:'The tab should only be composed of "x" and numbers from 1 to 9.',invalidTuning:"The tuning doesn't seem right. It should only be composed of 1 or more letters from A to G.",invalidChordName:"The chord name doesn't seem right. A valid chord name could be Amin, C, Gsus4...",noMatch:"The tab didn't match any known chord."},h=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],u=[{formula:"1-3-5",integer:"0-4-7",name:"Major",suffix:""},{formula:"1-5",integer:"0-7",name:"Power chord",suffix:"5"},{formula:"1-4-5",integer:"0-5-7",name:"Suspended fourth",suffix:"sus4"},{formula:"1-2-5",integer:"0-2-7",name:"Suspended second",suffix:"sus2"},{formula:"1-3-5-9",integer:"0-4-7-14",name:"Added ninth",suffix:"add9"},{formula:"1-3-5-6",integer:"0-4-7-9",name:"Major Sixth",suffix:"6"},{formula:"1-3-5-6-9",integer:"0-4-7-9-14",name:"Sixth, added ninth",suffix:"6/9"},{formula:"1-3-5-7",integer:"0-4-7-11",name:"Major seventh",suffix:"maj7"},{formula:"1-3-5-7-9",integer:"0-4-7-11-14",name:"Major ninth",suffix:"maj9"},{formula:"1-3-5-7-#11",integer:"0-4-7-11-18",name:"Major seventh, sharp eleventh",suffix:"maj7#11"},{formula:"1-3-5-7-9-13",integer:"0-4-7-11-14-21",name:"Major thirteen",suffix:"Maj13"},{formula:"1-b3-5",integer:"0-3-7",name:"Minor",suffix:"min"},{formula:"1-b3-5-9",integer:"0-3-7-14",name:"Minor, added ninth",suffix:"m(add9)"},{formula:"1-b3-5-6",integer:"0-3-7-9",name:"Minor sixth",suffix:"m6"},{formula:"1-b3-5-b6",integer:"0-3-7-8",name:"Minor, flat sixth",suffix:"mb6"},{formula:"1-b3-5-6-9",integer:"0-3-7-9-14",name:"Minor sixth, added ninth",suffix:"m6/9"},{formula:"1-b3-5-b7",integer:"0-3-7-10",name:"Minor seventh",suffix:"m7"},{formula:"1-b3-5-7",integer:"0-3-7-11",name:"Minor, major seventh",suffix:"m(maj7)"},{formula:"1-b3-5-b7",integer:"0-3-6-10",name:"Minor seventh, flat fifth",suffix:"m7b5"},{formula:"1-b3-5-b7-9",integer:"0-3-7-10-14",name:"Minor ninth",suffix:"m9"},{formula:"1-b3-5-7-9",integer:"0-3-7-11-14",name:"Minor ninth, major seventh",suffix:"m9(maj7)"},{formula:"1-b3-b5-b7-9",integer:"0-3-7-10-14",name:"Minor eleventh",suffix:"m9b5"},{formula:"1-b3-5-b7-9-11-13",integer:"0-3-7-10-14-17-21",name:"Minor thirteen",suffix:"m13"},{formula:"1-3-5-b7",integer:"0-4-7-10",name:"Dominant seventh",suffix:"7"},{formula:"1-3-5#",integer:"0-4-8",name:"Augmented",suffix:"aug"},{formula:"1-3-b5",integer:"0-4-6",name:"Diminished",suffix:"dim"},{formula:"1",integer:"0",name:"Single note",suffix:""},{formula:"1-3-b7",integer:"0-4-10",name:"Seventh",suffix:"7"},{formula:"1-3-6",integer:"0-4-9",name:"Sixth",suffix:"6"}],l={};return l.Instrument=function(t,e,n,o){try{l.isValidTuning(t)&&(this.tuning=r(t)),this.fretNumber=e,this.fretsToDisplay=isNaN(n)?0:n+1,this.maxSpan=isNaN(o)?4:o}catch(i){return console.error(i),!1}return this},l.Instrument.prototype.getChordInfo=function(t){var r=[],n=[],i=[],a={error:"",name:"",tab:t,notes:"",tuning:this.tuning.join(""),formula:""};try{l.isValidTab(t)&&(t=e(t))}catch(f){return a.error=f,a}var d=void 0,m=void 0;try{for(var g=0;g<t.length;g++)isNaN(t[g])?r.push("x"):(m=this.tuning[g],d=parseInt(t[g])+h.indexOf(m),d>h.length-1&&(d-=h.length),r.push(h[d]));a.notes=r.join("")}catch(f){return a.error=s.failedToConvertTabIntoNotes,a}var c=[];try{for(var p=0;p<this.tuning.length;p++)if(c.push({root:"",formula:[]}),r[p]&&"x"!==r[p].toLowerCase())for(var v=0;v<r.length;v++)if(r[v]&&"x"!==r[v].toLowerCase()){var x=h.indexOf(r[v])-h.indexOf(r[p]);0>x?x=h.length+x:0===x&&(c[p].root=r[v]),c[p].formula.push(x)}}catch(f){a.error=s.failedToCalculateFormula}for(var b=0;b<c.length;b++)if(""!==c[b].root){i.push(c[b].root),c[b].formula.sort(function(t,e){return t-e});var y=o(c[b].formula);n.push(y.join("-"))}var N=void 0,w=[],M=void 0,C=[];try{for(var A=0;A<u.length;A++){N=u[A].integer;for(var T=0;T<n.length;T++)M=new RegExp("^"+n[T]+"$","g"),N.match(M)&&i[T]&&(C.push(i[T]+u[A].suffix),w.push(u[A].formula))}if(!(w.length>0))throw s.noMatch;if(w.length>1){var j=o(w);a.formula=j}else a.formula=w}catch(f){return a.error=f,a}if(C.length>1){var S=o(C);a.name=S}else a.name=C;return a},l.Instrument.prototype.getChordsList=function(e,r,o){var f=this;o=o||0;var l=[],d=void 0,m=void 0,g=[],c=void 0,p=void 0,v={error:"",chordList:[],offset:0},x={basic:{rootBelow4thFret:!0,noMuteAfterFirstNote:!0,rootIsLowestNote:!0,splittedChord:!1,openString:!0},powerchord:{rootIsLowestNote:!0,rootOnLowestFret:!0,splittedChord:!1,openString:!1},bar:{rootIsLowestNote:!0,rootOnLowestFret:!0,noMuteAfterFirstNote:!0,splittedChord:!1,openString:!1}};try{if("string"!=typeof e)throw s.invalidChordName;e=n(e),c=e[0],d=e[1],l.push(c),p=h.indexOf(c),m=i(u,d),g=m.integer.split("-")}catch(b){return v.error=s.invalidChordName,v}for(var y=1;y<g.length;y++){var N=parseInt(g[y])+parseInt(p);N>h.length-1&&(N-=h.length),l.push(h[N])}var w=[],M=void 0,C=0;for(C=0;C<this.tuning.length;C++){w[C]=[],w[C].push("x");for(var A=0;A<l.length;A++)M=h.indexOf(l[A])-h.indexOf(this.tuning[C]),0>M&&(M=h.length+M),w[C].push(M),M+12<this.fretNumber&&w[C].push(M+12)}var T=[];for(C=0;C<this.tuning.length;C++)for(var j=T.length,S=0;S<w[C].length;S++)if(T[S])for(var O=0;j>O;O++)if(0===S)T[O].push(w[C][S]);else{var I=T[O].slice(0);I.pop(),I.push(w[C][S]),T.push(I)}else T[S]=[w[C][S]];var L=[],F=function(t,e){for(var r in t){if(!e.hasOwnProperty(r))return!1;if("object"===_typeof(t[r])){var n=t[r][0],o=t[r][1];if(e[r]<=n||e[r]>=o)return!1}else if(e[r]!==t[r])return!1}return!0};try{for(var E=function(){var e={};return t(T[k],l,f.tuning)&&a(T[k],"max")-a(T[k],"min")<f.maxSpan&&!function(){e.splittedChord=!1,e.openString=!1,e.frettedNotes=0;for(var t=0;t<T[k].length;t++){var r=T[k][t];if(isNaN(r))t>0&&t<T[k].length-1&&("x"!==T[k][t+1]&&"x"!==T[k][t-1]||T[k].lastIndexOf("x")>0&&T[k].lastIndexOf("x")<T[k].length-1)&&(e.splittedChord=!0);else{var n=r+h.indexOf(f.tuning[t]);0===r&&(e.openString=!0),p===n&&(0===e.frettedNotes&&(e.rootIsLowestNote=!0),e.rootBelow4thFret=4>=r?!0:!1,e.rootOnLowestFret=a(T[k],"min")>=r?!0:!1),T[k].lastIndexOf("x")<t?e.noMuteAfterFirstNote=!0:e.noMuteAfterFirstNote=!1,(r>0&&t<T[k].length-1&&r===T[k][t-1]||a(T[k],r)>=3)&&(e.barredString=isNaN(e.barredString)?1:e.barredString+1),e.frettedNotes++}}var o={tab:T[k],tag:[]};Object.getOwnPropertyNames(x).forEach(function(t,r){F(x[t],e)&&o.tag.indexOf(t)&&o.tag.push(t)}),L.push(o)}(),r>0&&r<T[k].length&&L.length>=r?(o=k+1,"break"):void 0},k=o;k<T.length;k++){var D=E();if("break"===D)break}}catch(b){console.error(b)}return v.chordList=L,v.offset=o,v},l.Instrument.prototype.getChordLayout=function(t,r){var n=void 0,o=void 0,i=this.fretsToDisplay;try{n=l.isValidTab(r)?e(r):[0,0,0,0,0,0]}catch(a){return!1}for(var f=[],h=0;h<n.length;h++)isNaN(n[h])===!1&&f.push(n[h]);var u=Math.abs(Math.max.apply(Math,f)),d=Math.abs(Math.min.apply(Math,f)),m=1;u>=i&&(m=d>0?d:1),1===m&&u>5&&(m=u-i+2);try{if(0===i)i=u-m+2;else if(u-m+1>i-1)throw i=u-m+2,s.croppedChordLayout}catch(a){console.error(a)}o='<table class="chord">';for(var g=0;i>g;g++){var c=g+m-1;1===m&&0===g&&(o+="<thead>"),o+=c%2&&c>0?'<tr><th class="fret-number">'+c+"</th>":"<tr><th></th>";for(var p=0;p<this.tuning.length;p++){var v=parseInt(n[p]);o+=0===g?0===v?'<th><div class="dot open"></div></th>':"<th></th>":v===m+g-1?'<td><div class="dot plain">'+n[p]+"</div></td>":"<td></td>"}o+=1===m&&0===g?"<tr></thead>":"</tr>"}return o+='<caption align="bottom">'+t+"</caption>",o+="</table>"},l.isValidTab=function(t){var e=new RegExp("^[x0-9]*$","i");if(e.test(t))return!0;throw s.invalidTab},l.isValidTuning=function(t){var e=new RegExp("^[#a-g]+$","i");if(e.test(t))return!0;throw s.invalidTuning},l}"undefined"==typeof Chordictionary?t.Chordictionary=e():console.error("Chordictionary is already defined.")}(window);