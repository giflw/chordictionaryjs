/*!Chordictionary v0.3.0-beta, @license MIT, (c) 2016 Hubert Fauconnier + contributors*/
!function(a){"use strict";function b(){function e(a,c,d){for(var e,f,g={},h=0;h<a.length;h++)if(!isNaN(a[h])){f=a[h]+b.indexOf(d[h]),f>b.length-1&&(f-=b.length);for(var i=0;i<c.length;i++)g[b[f]]?b[f]==b[i]&&g[b[f]]++:g[b[f]]=1}for(var i=0;i<c.length;i++){if(!(c[i]in g)){e=!1;break}e=!0}return e}function f(b,c){var c=c||"EADGBE",d=[];try{if(b.length<=c.length)return b.split("");if(b.length==2*c.length){for(var e=0;e<b.length;e++)e%2||d.push(b.slice(e,e+2));return d}if(b.length>c.length){if(l(b.split(""),"max")>1){for(var e=0;e<b.length;e++)-1!=b.charAt(e).search(/[x02-9]/i)||1==b.charAt(e)&&-1!=b.charAt(e+1).search(/x/i)?d.push(b.slice(e,e+1)):-1==b.charAt(e+1).search(/x/i)&&(d.push(b.slice(e,e+2)),e++);return d}throw a.invalidTab}}catch(f){return!1}}function g(b){var c=[],d=new RegExp("^[a-g]+$","i"),e=new RegExp("^[#a-g]+$","i");try{if(d.test(b))return b.toUpperCase().split("");if(e.test(b)){b=b.toUpperCase();for(var f=0;f<b.length;f++)"#"!=b.charAt(f)&&("#"!=b.charAt(f+1)?c.push(b.slice(f,f+1)):(c.push(b.slice(f,f+2)),f++));return c}throw a.invalidTuning}catch(g){return!1}}function h(b){var c,d;try{if("string"!=typeof b)throw a.invalidChordName;var e=b.search("#");return-1==e?(c=b.charAt(0),d=b.slice(1)):(c=b.slice(0,2).toUpperCase(),d=b.slice(2)),[c,d]}catch(f){return!1}}function j(a){try{if(!Array.isArray(a))throw a+" is not an array.";var a=a;return a.filter(function(a,b,c){return b==c.indexOf(a)})}catch(b){return!1}}function k(a,b){try{if("object"==typeof a){var a=a;if("string"==typeof b)var b=b.toLowerCase();for(var c=0;c<a.length;c++)for(var d in a[c]){if(a[c][d]==b)return a[c];if("string"==typeof a[c][d]&&a[c][d].toLowerCase()==b)return a[c]}throw"Couldn't find "+b+" in "+a}throw a+" is not an object."}catch(e){return!1}}function l(a,b){var c;try{if(!Array.isArray(a))throw a+" is not an array.";var a=a;if(!b)throw"Missing parameter.";var b=b;switch(b){case"min":if(c=Math.min.apply(Math,a),!isNaN(c))return c;for(var d=0;d<a.length;d++)isNaN(a[d])||(isNaN(c)?c=a[d]:a[d]<c&&(c=a[d]));break;case"max":if(c=Math.max.apply(Math,a),!isNaN(c))return c;for(var d=0;d<a.length;d++)isNaN(a[d])||(isNaN(c)?c=a[d]:a[d]>c&&(c=a[d]));break;default:c=m(a.join(""),b)}}catch(e){return!1}return c}function m(a,b,c){if(a+="",b+="",b.length<=0)return a.length+1;for(var d=0,e=0,f=c?1:b.length;;){if(e=a.indexOf(b,e),!(e>=0))break;++d,e+=f}return d}var a={invalidTab:'The tab should only be composed of "x" and numbers from 1 to 9.',invalidTuning:"The tuning doesn't seem right. It should only be composed of 1 or more letters from A to G.",invalidChordName:"The chord name doesn't seem right. A valid chord name could be Amin, C, Gsus4...",failedToConvertTabIntoNotes:"Could not convert the tab into notes.",failedToCalculateFormula:"Could not calculate the formulas.",noMatch:"The tab didn't match any known chord."},b=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],c=[{formula:"1-3-5",integer:"0-4-7",name:"Major",suffix:""},{formula:"1-5",integer:"0-7",name:"Power chord",suffix:"5"},{formula:"1-4-5",integer:"0-5-7",name:"Suspended fourth",suffix:"sus4"},{formula:"1-2-5",integer:"0-2-7",name:"Suspended second",suffix:"sus2"},{formula:"1-3-5-9",integer:"0-4-7-14",name:"Added ninth",suffix:"add9"},{formula:"1-3-5-6",integer:"0-4-7-9",name:"Major Sixth",suffix:"6"},{formula:"1-3-5-6-9",integer:"0-4-7-9-14",name:"Sixth, added ninth",suffix:"6/9"},{formula:"1-3-5-7",integer:"0-4-7-11",name:"Major seventh",suffix:"maj7"},{formula:"1-3-5-7-9",integer:"0-4-7-11-14",name:"Major ninth",suffix:"maj9"},{formula:"1-3-5-7-#11",integer:"0-4-7-11-18",name:"Major seventh, sharp eleventh",suffix:"maj7#11"},{formula:"1-3-5-7-9-13",integer:"0-4-7-11-14-21",name:"Major thirteen",suffix:"Maj13"},{formula:"1-b3-5",integer:"0-3-7",name:"Minor",suffix:"min"},{formula:"1-b3-5-9",integer:"0-3-7-14",name:"Minor, added ninth",suffix:"m(add9)"},{formula:"1-b3-5-6",integer:"0-3-7-9",name:"Minor sixth",suffix:"m6"},{formula:"1-b3-5-b6",integer:"0-3-7-8",name:"Minor, flat sixth",suffix:"mb6"},{formula:"1-b3-5-6-9",integer:"0-3-7-9-14",name:"Minor sixth, added ninth",suffix:"m6/9"},{formula:"1-b3-5-b7",integer:"0-3-7-10",name:"Minor seventh",suffix:"m7"},{formula:"1-b3-5-7",integer:"0-3-7-11",name:"Minor, major seventh",suffix:"m(maj7)"},{formula:"1-b3-5-b7",integer:"0-3-6-10",name:"Minor seventh, flat fifth",suffix:"m7b5"},{formula:"1-b3-5-b7-9",integer:"0-3-7-10-14",name:"Minor ninth",suffix:"m9"},{formula:"1-b3-5-7-9",integer:"0-3-7-11-14",name:"Minor ninth, major seventh",suffix:"m9(maj7)"},{formula:"1-b3-b5-b7-9",integer:"0-3-7-10-14",name:"Minor eleventh",suffix:"m9b5"},{formula:"1-b3-5-b7-9-11-13",integer:"0-3-7-10-14-17-21",name:"Minor thirteen",suffix:"m13"},{formula:"1-3-5-b7",integer:"0-4-7-10",name:"Dominant seventh",suffix:"7"},{formula:"1-3-5#",integer:"0-4-8",name:"Augmented",suffix:"aug"},{formula:"1-3-b5",integer:"0-4-6",name:"Diminished",suffix:"dim"},{formula:"1",integer:"0",name:"Single note",suffix:""},{formula:"1-3-b7",integer:"0-4-10",name:"Seventh",suffix:"7"},{formula:"1-3-6",integer:"0-4-9",name:"Sixth",suffix:"6"}],d={};return d.Instrument=function(a,b,c,d){return this.tuning=a,this.fretNumber=b,this.fretsToDisplay=isNaN(c)?0:c,this.maxSpan=isNaN(d)?5:d,this},d.Instrument.prototype.getChordInfo=function(d){var e=[],h=[],i=[],k={error:"",name:"",tab:d,notes:"",tuning:this.tuning,formula:""};try{if(this.isValidTab(d)){var d=f(d);k.tab=d.join(" ")}}catch(l){return k.error=l,k}try{if(this.isValidTuning(this.tuning))var m=g(this.tuning)}catch(l){return k.error=l,k}var n,o;try{for(var p=0;p<d.length;p++)isNaN(d[p])?e.push("x"):(o=m[p],n=parseInt(d[p])+b.indexOf(o),n>b.length-1&&(n-=b.length),e.push(b[n]));k.notes=e.join("")}catch(l){return k.error=a.failedToConvertTabIntoNotes,k}var q=[];try{for(var p=0;p<m.length;p++)if(q.push({root:"",formula:[]}),e[p]&&"x"!=e[p])for(var r=0;r<e.length;r++)if(e[r]&&"x"!=e[r]){var s=b.indexOf(e[r])-b.indexOf(e[p]);0>s?s=b.length+s:0==s&&(q[p].root=e[r]),q[p].formula.push(s)}}catch(l){k.error=a.failedToCalculateFormula}for(var p=0;p<q.length;p++)if(""!=q[p].root){i.push(q[p].root),q[p].formula.sort(function(a,b){return a-b});var t=j(q[p].formula);h.push(t.join("-"))}var u,w,v=[],x=[];try{for(var p=0;p<c.length;p++){u=c[p].integer;for(var r=0;r<h.length;r++)w=new RegExp("^"+h[r]+"$","g"),u.match(w)&&i[r]&&(x.push(i[r]+c[p].suffix),v.push(c[p].formula))}if(!(v.length>0))throw a.noMatch;if(v.length>1){var y=j(v);k.formula=y}else k.formula=v}catch(l){return k.error=l,k}if(x.length>1){var z=j(x);k.name=z}else k.name=x;return k},d.Instrument.prototype.getChordsList=function(d,f,i){var j=[],i=i||0,m={error:"",chordList:[],offset:0};try{if("string"!=typeof d)throw a.invalidChordName;var d=h(d),n=d[0],o=d[1];if(j.push(n),this.isValidTuning(this.tuning))var p=g(this.tuning)}catch(q){return m.error=q,m}try{var r=k(c,o),s=r.integer.split("-")}catch(q){return m.error=q,m}for(var t=1;t<s.length;t++){var u=parseInt(s[t])+parseInt(b.indexOf(n));u>b.length-1&&(u-=b.length),j.push(b[u])}for(var w,v=[],x=0;x<p.length;x++){v[x]=[],v[x].push("x");for(var y=0;y<j.length;y++)w=b.indexOf(j[y])-b.indexOf(p[x]),0>w&&(w=b.length+w),v[x].push(w),w+12<this.fretNumber&&v[x].push(w+12)}for(var z=[],x=0;x<p.length;x++)for(var A=z.length,t=0;t<v[x].length;t++)if(z[t])for(var B=0;A>B;B++)if(0===t)z[B].push(v[x][t]);else{var C=z[B].slice(0);C.pop(),C.push(v[x][t]),z.push(C)}else z[t]=[v[x][t]];for(var D=[],E=i;E<z.length;E++)if(e(z[E],j,p)&&l(z[E],"max")-l(z[E],"min")<this.maxSpan){for(var t=0;t<z[E].length;t++)if(!isNaN(z[E][t])){var F=z[E][t]+b.indexOf(p[t]);if(z[E][t]<=4&&b.indexOf(n)==F&&z[E].lastIndexOf("x")<t){D.push(z[E]);break}break}if(f>0&&f<z[E].length&&D.length>=f){i=E+1;break}}return m.chordList=D,m.offset=i,m},d.Instrument.prototype.getChordLayout=function(a,b){var c,d,e=this.fretsToDisplay;try{if(this.isValidTab(b))var c=f(b);else var c=[0,0,0,0,0,0];if(this.isValidTuning(this.tuning))var h=g(this.tuning);else var h=["E","A","D","G","B","E"]}catch(i){return!1}for(var j=[],k=0;k<c.length;k++)isNaN(c[k])===!1&&j.push(c[k]);var l=Math.abs(Math.max.apply(Math,j)),m=1;l>e&&(m=Math.abs(Math.min.apply(Math,j)-1)),1===m&&l>5&&(m=l-3),0===e&&(e=l-m+2),d='<table class="chord">';for(var n=0;e>n;n++){var o=n+m-1;1==m&&0==n&&(d+="<thead>"),d+=o%2&&o>0?'<tr><th class="fret-number">'+o+"</th>":"<tr><th></th>";for(var p=0;p<h.length;p++)d+=0==n?0==c[p]?'<th><div class="dot open"></div></th>':"<th></th>":c[p]==m+n-1?'<td><div class="dot plain">'+c[p]+"</div></td>":"<td></td>";d+=1==m&&0==n?"<tr></thead>":"</tr>"}return d+='<caption align="bottom">'+a+"</caption>",d+="</table>"},d.Instrument.prototype.isValidTab=function(b){var c=new RegExp("^[x0-9]*$","i");if(c.test(b))return!0;throw a.invalidTab},d.Instrument.prototype.isValidTuning=function(b){var b=b||this.tuning,c=new RegExp("^[#a-g]+$","i");if(c.test(b))return!0;throw a.invalidTuning},d}"undefined"==typeof Chordictionary?a.Chordictionary=b():console.error()}(window);
